{namespace gh=Grandhotel\Hausnetz\ViewHelpers}

<link rel="stylesheet" href="{f:uri.resource(path:'libraries/bootstrap-datetimepicker/css//bootstrap-datetimepicker.min.css')}">
<script src="{f:uri.resource(path:'libraries/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js')}"></script>

<link rel="stylesheet" href="{f:uri.resource(path:'libraries/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css')}">
<script src="{f:uri.resource(path:'libraries/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js')}"></script>
   
<f:form enctype="multipart/form-data" action="{action}" objectName="item" object="{item}" class="form-horizontal">

   <f:for each="{fields}" as="field">
      
      <div class="form-group">
         <label class="col-sm-2 control-label" for="{field.property}">{field.name}</label>
         <div class="col-sm-10">
               
                <f:if condition="{field.format} == 'date'">
                   <div class="input-group date form-datetime" data-link-field="{field.property}-input">
                    <input class="form-control display-field" size="16" type="text" value="" readonly>
                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                    <span class="input-group-addon"><i class="fa fa-times"></i></span>
                   </div>
                  <f:form.textfield property="{field.property}" class="hide" id="{field.property}-input" />
                </f:if>
            
               <f:if condition="{field.format} == 'color'">
                  <f:form.textfield class="colorpicker" property="{field.property}">
                     {gh:getProperty(object:'{item}', field:'{field.property}')}
                  </f:form.textfield>
               </f:if>

                <f:if condition="{field.format} == 'default'">
                  <f:form.textfield class="form-control" property="{field.property}">
                     {gh:getProperty(object:'{item}', field:'{field.property}')}
                  </f:form.textfield>
                </f:if>

         </div>
      </div>

<f:comment>
   
</f:comment>
     
   </f:for>

   <div class="form-group">
      <div class="col-sm-2">
      </div>
      <div class="col-sm-10">
      <button onclick="$(this).parents('form').submit();">Speichern</button>
      </div>
   </div>
</f:form>
<script type="text/javascript">
    $(function() {

        $('.form-datetime').each(function() {
            var linkFieldId = $(this).attr('data-link-field');
            $(this).find('.display-field').val($('#' + linkFieldId).val());
            $(this).attr('data-date', $('#' + linkFieldId).val());
        });

        $('.form-datetime').datetimepicker({
            //language:  'fr',
            fontAwesome: 1,
            weekStart: 1,
            todayBtn: 1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 2,
            forceParse: 0,
            showMeridian: 0,
            format: 'dd.mm.yyyy',
            linkFormat: 'dd.mm.yyyy'
        });
        
        $('.colorpicker').colorpicker();

    });
</script>
